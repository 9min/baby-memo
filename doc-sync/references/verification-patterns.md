# 검증 패턴

문서에 기재된 각 주장 유형을 코드베이스와 대조하는 구체적인 패턴 모음.

## 목차

1. [package.json 검증](#packagejson-검증)
2. [프로젝트 구조 검증](#프로젝트-구조-검증)
3. [라우트 검증](#라우트-검증)
4. [테스트 수 검증](#테스트-수-검증)
5. [스토어/모듈 검증](#스토어모듈-검증)
6. [마이그레이션 검증](#마이그레이션-검증)
7. [컴포넌트 목록 검증](#컴포넌트-목록-검증)
8. [환경 변수 검증](#환경-변수-검증)

---

## package.json 검증

추출하여 비교할 항목:

```
Scripts:    package.json 읽기 → scripts 객체 → 문서에 기재된 명령어와 비교
Deps:       package.json 읽기 → dependencies + devDependencies → 이름과 메이저 버전 비교
Engine:     package.json 읽기 → engines 필드 → 문서에 기재된 Node/npm 버전과 비교
```

흔한 불일치:
- 스크립트가 이름 변경 또는 삭제되었으나 문서에 이전 이름이 남아 있음
- 의존성이 새 메이저 버전으로 업그레이드되었으나 문서에 이전 버전 표기
- 새 스크립트가 추가되었으나 문서에 미반영

## 프로젝트 구조 검증

전략: 최상위 디렉토리를 Glob한 후, 문서에 기재된 하위 디렉토리를 재귀적으로 검증.

```
1. Glob("src/*/") → src/ 아래 실제 최상위 디렉토리 목록 획득
2. 문서 구조 트리의 각 디렉토리에 대해:
   a. Glob("{dir}/") → 존재 여부 확인
   b. 파일 목록이 기재되어 있으면 Glob("{dir}/*") → 비교
3. 표시: 코드에 있지만 문서에 없는 것(누락), 문서에 있지만 코드에 없는 것(오래됨)
```

흔한 불일치:
- 새 디렉토리가 추가되었으나 구조 트리 미갱신
- 디렉토리 이름이 변경되었으나 문서에 이전 이름 그대로
- 구조 주석에 나열된 파일이 더 이상 존재하지 않음

## 라우트 검증

프레임워크에 따라 전략이 다름:

**React Router:**
```
라우트 설정 파일에서 "path:" 또는 "<Route" 패턴을 Grep
문서에 기재된 라우트 테이블과 비교
```

**Next.js (App Router):**
```
Glob("app/**/page.{tsx,jsx,ts,js}") → 파일 구조에서 라우트 도출
문서에 기재된 라우트와 비교
```

**Express/Fastify:**
```
"app.get|post|put|delete|patch" 또는 "router.get|post|put|delete|patch" Grep
문서에 기재된 API 엔드포인트와 비교
```

## 테스트 수 검증

두 가지 접근법:

**소스에서 카운트 (빠름, 근사치):**
```
테스트 파일 전체에서 "it\(|it\.|test\(" 패턴을 Grep
고유 매치 수 집계
```

**테스트 스위트 실행 (정확, 느림):**
```
테스트 러너를 카운트/요약 출력 모드로 실행
출력에서 총 테스트 수를 파싱
```

참고: 어떤 방법을 사용했는지 명시. 소스 카운트는 파라미터화된 테스트, 조건부 테스트, 스킵된 테스트 등으로 인해 런타임 카운트와 다를 수 있음.

## 스토어/모듈 검증

```
1. Glob("{store_dir}/*.{ts,tsx}") → 실제 스토어 파일 목록 획득
2. 파일명에서 스토어 이름 추출 (예: familyStore.ts → familyStore)
3. 문서에 기재된 스토어 목록과 비교
4. 선택적으로 "export" 패턴을 Grep하여 내보내기 이름 검증
```

## 마이그레이션 검증

```
1. Glob("{migration_dir}/*") → 마이그레이션 파일 수 집계 및 목록화
2. 문서에 기재된 "X개 마이그레이션" 주장과 수 비교
3. 문서에 기재된 범위와 비교 (예: "00001~00009" vs 실제 파일)
```

## 컴포넌트 목록 검증

문서에 디렉토리별 컴포넌트 목록이 있는 경우:

```
1. 컴포넌트 목록이 기재된 각 디렉토리에 대해:
   a. Glob("{dir}/*.{tsx,jsx}") → 실제 컴포넌트 확인
   b. 문서에 기재된 목록과 비교
   c. 표시: 누락(코드에 있지만 문서에 없음), 오래됨(문서에 있지만 코드에 없음)
```

## 환경 변수 검증

```
1. env 접근 패턴을 Grep:
   - JavaScript/TS: "process.env.", "import.meta.env."
   - Python: "os.environ", "os.getenv"
   - Go: "os.Getenv"
2. 변수명 추출
3. 문서에 기재된 환경 변수와 비교
4. .env.example 파일이 있으면 함께 확인
```
