# PRD - Baby Memo 제품 요구사항 문서

## 1. 제품 비전

### 한 줄 요약
가족이 함께 아기 활동을 실시간으로 기록하고 공유하는 모바일 우선 웹앱.

### 배경
- 아기 돌봄은 여러 가족 구성원이 교대로 담당.
- 수유, 수면, 기저귀 교체 시간을 정확히 기록해야 패턴을 파악 가능.
- 기존 앱들은 로그인이 복잡하거나, 기기 간 동기화가 안 됨.

### 핵심 가치
1. **초간편 시작**: 가족 코드 하나로 즉시 참여. 회원가입/로그인 없음.
2. **실시간 공유**: 한 기기에서 기록하면 모든 가족 기기에 즉시 반영.
3. **모바일 우선**: 한 손으로 빠르게 기록 가능한 UI.

## 2. 사용자 페르소나

### P1: 새내기 부모 (Primary)
- **나이**: 25-40세
- **상황**: 첫 아기 출산 후 수유/수면 패턴 파악이 필요
- **니즈**: 빠르게 기록하고, 배우자와 공유
- **기기**: 스마트폰 (주로 iOS/Android 브라우저)

### P2: 조부모/돌봄 도우미
- **나이**: 50-70세
- **상황**: 주간 돌봄 담당, 부모에게 기록 공유 필요
- **니즈**: 복잡한 로그인 없이 간단히 참여
- **기기**: 스마트폰 (기술 친숙도 낮음)

## 3. 기능 요구사항

### Phase 1 (MVP) — 완료

#### F1: 가족 코드 시스템
- 6-8자리 영대문자+숫자 코드로 가족방 생성/참여
- 새 코드 입력 → 자동으로 가족방 생성
- 기존 코드 입력 → 4자리 비밀번호 입력 후 참여
- 기기별 UUID로 식별 (localStorage 저장)
- 기기 닉네임 설정 가능 (예: "엄마 폰", "아빠 폰")

#### F2: 활동 기록
- **이유식** (먹어요): 메뉴명, 양(많이/보통/조금/거부), 메모
- **음료** (마셔요): 종류(분유/모유/물/주스/차), 양(ml), 메모
- **영양제** (영양제): 프리셋 관리 + 선택 기록, 메모
- **기저귀** (기저귀): 종류(소변/대변/혼합), 양(많음/보통/적음), 메모
- **수면** (잠자요): 시작시간/종료시간 기록, 수면 시간 자동 계산
- 원터치 기록 + 시간 직접 편집 가능 (TimePicker)
- 기본값 저장 기능 (기기별 localStorage)

#### F3: 타임라인
- 시간순 활동 목록 (시간대별 그룹: 오전/오후/저녁/새벽)
- 날짜별 네비게이터 (좌우 이동)
- 월별 달력 뷰 (기록 있는 날짜에 점 표시)
- 활동 수정/삭제 기능
- Supabase Realtime으로 다기기 실시간 동기화

#### F4: 설정
- 가족 코드 표시 및 복사 (공유용)
- 기기 닉네임 편집
- 방 비밀번호 변경 (4자리 숫자)
- 아기 프로필 관리 (이름, 생년월일, D+일수 표시)
- 영양제 프리셋 관리 (추가/삭제)
- 다크모드/라이트모드/시스템 테마 전환
- CSV 데이터 내보내기 (전체 활동 기록)
- 가족방 나가기

### Phase 2 — 완료

#### F5: 통계 대시보드
- 일별/주별/월별 기간 전환 탭
- 활동 횟수 차트 (BarChart, 활동 타입별 색상)
- 음료 섭취량 차트 (BarChart, 음료 종류별 색상)
- 수면 시간 차트 (BarChart, 시간 단위)
- 요약 카드 (총 활동, 총 음료량, 총 수면시간)
- 기간별 날짜 네비게이터

#### F6: PWA 지원
- 홈 화면에 앱 추가 (Add to Home Screen)
- 앱 아이콘 및 스플래시 화면
- 설치 프롬프트 (InstallPrompt 컴포넌트)

### Phase 3 (향후)
- 오프라인 지원 (Service Worker 캐싱)
- 다국어 지원
- 푸시 알림 (기록 리마인더)
- 성장 기록 (키, 몸무게)

## 4. 사용자 플로우

### 최초 사용 (가족방 생성)
```
앱 접속 → /join 페이지
→ 가족 코드 입력 (예: "BABY01")
→ 가족방 자동 생성 + 기기 등록
→ 홈 화면 (/) 이동
→ 활동 기록 시작
```

### 가족 구성원 참여
```
기존 사용자가 가족 코드 공유 (설정 → 복사)
→ 새 사용자 앱 접속 → /join
→ 동일 코드 입력 → 비밀번호 입력
→ 같은 가족방에 참여
→ 실시간 동기화 시작
```

### 재방문
```
앱 접속 → localStorage에서 가족 코드 복원
→ 자동으로 가족방 연결
→ 홈 화면으로 바로 이동
```

### 활동 기록
```
홈 화면 → 활동 버튼 탭 (먹어요/마셔요/영양제/기저귀/잠자요)
→ 바텀 시트에서 상세 입력
→ 기록 완료 → 실시간 반영
→ 타임라인에서 수정/삭제 가능
```

## 5. 비기능 요구사항

| 항목 | 요구사항 |
|------|----------|
| 성능 | 첫 로딩 3초 이내, 기록 반영 1초 이내 |
| 접근성 | 모바일 브라우저 최적화 (iOS Safari, Chrome) |
| 보안 | 가족방 비밀번호(4자리), MVP에서는 RLS 미적용 |
| 가용성 | Supabase 무료 티어 범위 내 운영 |
| 언어 | 한국어 UI |
| 테스트 | 329개 테스트 (Vitest + Testing Library) |
| CI | GitHub Actions PR 체크 (typecheck + lint + test + build) |

## 6. 성공 지표

### MVP 기준 — 달성
- 가족 코드로 입장 → 홈 이동 성공률 100%
- 새로고침 후 자동 복원 성공
- 2대 이상 기기에서 같은 family_id 공유 확인
- `npm run build` 에러 없이 성공
- 329개 테스트 통과

### 향후 지표
- DAU (Daily Active Users)
- 일평균 기록 횟수
- 가족방당 평균 기기 수
- 세션 지속 시간

## 7. 기술 제약사항
- Supabase 무료 티어 (500MB DB, 5GB 대역폭)
- Supabase Auth 미사용 (가족 코드 + 비밀번호 기반)
- 서버리스 — 별도 백엔드 서버 없음
- SPA (Single Page Application) — SEO 불필요
- PWA 지원 (vite-plugin-pwa)
